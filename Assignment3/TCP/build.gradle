//plugins {
//    id 'java'
//}

// set as java application
//apply plugin: 'application'

apply plugin: 'java'

////define main class
//mainClassName = 'Server'

group 'org.example'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    // https://mvnrepository.com/artifact/org.json/json
    implementation group: 'org.json', name: 'json', version: '20210307'

}

test {
    useJUnitPlatform()
}

task runServer(type: JavaExec) {
    group 'TCP Server/Client'
    description 'Creates Server socket waits for up to 3 messages'

    classpath = sourceSets.main.runtimeClasspath

    main = 'Server'

    if (project.hasProperty('port')) {
        args(project.getProperty('port'));
    }
}

task runClient(type: JavaExec) {
    group 'TCP Server/Client'
    description 'Creates client socket sends a message and number to server'

    classpath = sourceSets.main.runtimeClasspath

    main = 'Client'
    standardInput = System.in
    standardOutput = System.out

    if (project.hasProperty("host") && project.hasProperty('port')) {
        args(project.getProperty('host'), project.getProperty('port'));
    }
}
